<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>LinLove</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #020617;
            --glass: rgba(15, 23, 42, 0.72);
            --glass-soft: rgba(15, 23, 42, 0.52);
            --accent: #ff4b8b;
            --accent-soft: rgba(255, 75, 139, 0.16);
            --success: #4ade80;
            --danger: #fb7185;
            --text: #f9fafb;
            --text-muted: #9ca3af;
            --border-subtle: rgba(148, 163, 184, 0.18);
            --shadow-strong: 0 18px 55px rgba(15, 23, 42, 0.85);
            --shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.65);
        }

        [data-theme="dark"] {
            /* same tokens in dark, Telegram —Å–∞–º –æ—Ç–¥–∞—Å—Ç colorScheme */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui, sans-serif;
            background: radial-gradient(circle at top, #0f172a 0, #020617 40%, #000 100%);
            color: var(--text);
            min-height: 100vh;
            padding-bottom: env(safe-area-inset-bottom);
            -webkit-font-smoothing: antialiased;
            overscroll-behavior: none;
        }

        .app-shell {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            padding: 12px 12px calc(12px + env(safe-area-inset-bottom));
            gap: 12px;
            max-width: 540px;
            margin: 0 auto;
        }

        .glass-panel {
            border-radius: 28px;
            background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.16), transparent 55%),
                        radial-gradient(circle at bottom right, rgba(59, 130, 246, 0.16), transparent 55%),
                        var(--glass);
            border: 1px solid rgba(148, 163, 184, 0.34);
            box-shadow: var(--shadow-strong);
            backdrop-filter: blur(26px) saturate(180%);
            -webkit-backdrop-filter: blur(26px) saturate(180%);
        }

        .top-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 18px 10px;
            gap: 10px;
        }

        .top-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .top-logo {
            width: 30px;
            height: 30px;
            border-radius: 999px;
            background: radial-gradient(circle at 30% 20%, #f97316, transparent 55%),
                        radial-gradient(circle at 70% 80%, #f43f5e, transparent 60%),
                        #0f172a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 17px;
            box-shadow: 0 8px 26px rgba(248, 113, 113, 0.75);
        }

        .top-text-main {
            font-size: 16px;
            font-weight: 600;
            letter-spacing: 0.02em;
        }

        .top-text-sub {
            font-size: 12px;
            color: var(--text-muted);
        }

        .pill-online {
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(22, 163, 74, 0.16);
            border: 1px solid rgba(74, 222, 128, 0.5);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
        }

        .pill-dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
            background: #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
        }

        .screen-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feed-frame {
            width: 100%;
            max-width: 430px;
            aspect-ratio: 9 / 16;
            border-radius: 32px;
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle at top, rgba(248, 113, 113, 0.24), transparent 55%),
                        radial-gradient(circle at bottom, rgba(37, 99, 235, 0.24), transparent 55%),
                        #020617;
            border: 1px solid rgba(148, 163, 184, 0.45);
            box-shadow: 0 22px 60px rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(30px) saturate(190%);
            -webkit-backdrop-filter: blur(30px) saturate(190%);
        }

        .feed-photo-layer {
            position: absolute;
            inset: 0;
            overflow: hidden;
        }

        .feed-photo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform-origin: center;
            transform: scale(1.04);
            filter: saturate(1.08) contrast(1.08);
        }

        .feed-gradient-top {
            position: absolute;
            inset: 0 0 65%;
            background: linear-gradient(to bottom, rgba(15, 23, 42, 0.86), transparent 85%);
            pointer-events: none;
        }

        .feed-gradient-bottom {
            position: absolute;
            inset: 55% 0 0;
            background: linear-gradient(to top, rgba(15, 23, 42, 0.96), transparent 70%);
            pointer-events: none;
        }

        .feed-top-meta {
            position: absolute;
            inset: 0;
            padding: 16px 16px 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            color: #e5e7eb;
            font-size: 13px;
            pointer-events: none;
        }

        .age-pill {
            padding: 6px 11px;
            border-radius: 999px;
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.7);
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 12px 25px rgba(15, 23, 42, 0.8);
        }

        .age-dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: var(--accent);
        }

        .stories-dots {
            display: flex;
            gap: 4px;
        }

        .stories-dot {
            height: 3px;
            width: 20px;
            border-radius: 999px;
            background: rgba(156, 163, 175, 0.35);
        }

        .stories-dot.active {
            background: #f97316;
        }

        .feed-main-meta {
            position: absolute;
            left: 16px;
            right: 16px;
            bottom: 120px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            color: #f9fafb;
        }

        .name-row {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        .name-main {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: 0.01em;
        }

        .city-tag {
            padding: 6px 9px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.5);
            font-size: 11px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .bio-text {
            font-size: 13px;
            color: #e5e7eb;
            max-width: 90%;
            text-shadow: 0 10px 35px rgba(15, 23, 42, 0.9);
        }

        .chips-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 2px;
        }

        .chip {
            padding: 5px 9px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.85);
            border: 1px solid rgba(148, 163, 184, 0.65);
            font-size: 11px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .chip-accent {
            background: rgba(244, 63, 94, 0.18);
            border-color: rgba(248, 113, 113, 0.85);
        }

        .actions-row {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 18px 18px calc(18px + env(safe-area-inset-bottom));
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .swipe-hint {
            display: flex;
            justify-content: center;
            font-size: 11px;
            color: var(--text-muted);
            gap: 6px;
        }

        .actions-buttons {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 26px;
        }

        .circle-btn {
            width: 74px;
            height: 74px;
            border-radius: 999px;
            border: none;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.16s ease-out, box-shadow 0.16s ease-out, background 0.18s;
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(22px) saturate(160%);
            -webkit-backdrop-filter: blur(22px) saturate(160%);
        }

        .circle-like {
            background: radial-gradient(circle at 30% 20%, #f97316, transparent 55%),
                        radial-gradient(circle at 70% 80%, #f43f5e, transparent 55%),
                        rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(248, 113, 113, 0.85);
            color: #f9fafb;
            font-size: 30px;
        }

        .circle-dislike {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.7);
            color: #e5e7eb;
            font-size: 26px;
        }

        .circle-btn:active {
            transform: scale(0.9);
            box-shadow: 0 6px 18px rgba(15, 23, 42, 0.85);
        }

        .mini-btn {
            width: 48px;
            height: 48px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: rgba(15, 23, 42, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #e5e7eb;
            font-size: 20px;
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.9);
        }

        .bottom-nav-glass {
            margin-top: auto;
            padding: 8px 12px;
        }

        .bottom-nav-inner {
            border-radius: 22px;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.96));
            border: 1px solid rgba(15, 23, 42, 0.9);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 10px;
            box-shadow: 0 16px 40px rgba(15, 23, 42, 1);
            backdrop-filter: blur(32px) saturate(190%);
            -webkit-backdrop-filter: blur(32px) saturate(190%);
        }

        .nav-pill-toggle {
            display: inline-flex;
            padding: 3px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.96);
            border: 1px solid rgba(51, 65, 85, 0.9);
        }

        .segmented-item {
            border-radius: 999px;
            padding: 5px 11px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--text-muted);
            cursor: pointer;
            transition: background 0.18s, color 0.18s, transform 0.16s;
        }

        .segmented-item.active {
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.35), rgba(251, 113, 133, 0.75));
            color: #0f172a;
        }

        .segmented-dot {
            width: 4px;
            height: 4px;
            border-radius: 999px;
            background: currentColor;
        }

        .nav-icon-btn {
            width: 32px;
            height: 32px;
            border-radius: 999px;
            border: 1px solid rgba(51, 65, 85, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #e5e7eb;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 1));
            cursor: pointer;
            transition: transform 0.16s, box-shadow 0.18s, background 0.18s;
        }

        .nav-icon-btn:active {
            transform: scale(0.9);
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
        }

        .nav-badge {
            position: absolute;
            top: -3px;
            right: -3px;
            min-width: 14px;
            height: 14px;
            border-radius: 999px;
            background: #f97316;
            color: #0f172a;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            box-shadow: 0 0 12px rgba(248, 113, 113, 0.95);
        }

        .nav-icon-wrapper {
            position: relative;
        }

        .hidden { display: none !important; }

        @media (max-width: 400px) {
            .feed-frame { border-radius: 26px; }
            .circle-btn { width: 66px; height: 66px; }
        }
    </style>
</head>
<body>
<div class="app-shell">
    <div class="glass-panel">
        <div class="top-bar">
            <div class="top-title">
                <div class="top-logo">
                    <span>üíó</span>
                </div>
                <div>
                    <div class="top-text-main">LinLove</div>
                    <div class="top-text-sub">–∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –≤–Ω—É—Ç—Ä–∏ Telegram</div>
                </div>
            </div>
            <div class="pill-online">
                <div class="pill-dot"></div>
                <span id="online-counter">1 274 –æ–Ω–ª–∞–π–Ω</span>
            </div>
        </div>

        <div class="screen-container">
            <!-- FULLSCREEN 9:16 FEED CARD -->
            <div class="feed-frame" id="feed-card">
                <div class="feed-photo-layer">
                    <img id="feed-photo" class="feed-photo" src="https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg" alt="profile" />
                    <div class="feed-gradient-top"></div>
                    <div class="feed-gradient-bottom"></div>
                </div>

                <div class="feed-top-meta">
                    <div class="age-pill">
                        <div class="age-dot"></div>
                        <span id="feed-age">21</span>
                    </div>
                    <div class="stories-dots">
                        <div class="stories-dot active"></div>
                        <div class="stories-dot"></div>
                        <div class="stories-dot"></div>
                    </div>
                </div>

                <div class="feed-main-meta">
                    <div class="name-row">
                        <div class="name-main" id="feed-name">–ê–ª–∏–Ω–∞</div>
                        <div class="city-tag" id="feed-city">
                            <span>üìç</span>
                            <span>–ê–ª–º–∞—Ç—ã</span>
                        </div>
                    </div>
                    <div class="bio-text" id="feed-bio">
                        –õ—é–±–ª—é –ø–æ–∑–¥–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏, –∫–æ—Ñ–µ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±–æ—è—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–¥.
                    </div>
                    <div class="chips-row" id="feed-tags">
                        <div class="chip chip-accent">üéß –ú—É–∑—ã–∫–∞</div>
                        <div class="chip">üéÆ –ò–≥—Ä—ã</div>
                        <div class="chip">‚úàÔ∏è –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
                    </div>
                </div>

                <div class="actions-row">
                    <div class="swipe-hint">
                        <span>–°–≤–∞–π–ø–∞–π ¬∑</span>
                        <span>–≤–ª–µ–≤–æ ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å ¬∑ –≤–ø—Ä–∞–≤–æ ‚Äî –ª–∞–π–∫</span>
                    </div>

                    <div class="actions-buttons">
                        <button class="circle-btn circle-dislike" id="btn-dislike">üëã</button>
                        <button class="circle-btn circle-like" id="btn-like">‚ô•</button>
                        <button class="mini-btn" id="btn-info">‚ãØ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- iOS‚Äëstyle glass bottom navigation -->
    <div class="bottom-nav-glass">
        <div class="bottom-nav-inner">
            <div class="nav-pill-toggle" id="nav-toggle">
                <div class="segmented-item active" data-target="feed">
                    <div class="segmented-dot"></div>
                    <span>–ê–Ω–∫–µ—Ç—ã</span>
                </div>
                <div class="segmented-item" data-target="likes">
                    <span>–õ–∞–π–∫–∏</span>
                </div>
            </div>

            <div style="display:flex;align-items:center;gap:10px;">
                <div class="nav-icon-wrapper">
                    <button class="nav-icon-btn" id="btn-messages">üí¨</button>
                    <div class="nav-badge hidden" id="badge-messages">2</div>
                </div>
                <button class="nav-icon-btn" id="btn-profile">üë§</button>
            </div>
        </div>
    </div>
</div>

<script>
    const tg = window.Telegram?.WebApp;

    if (tg) {
        tg.expand();
        tg.ready();
        tg.enableClosingConfirmation();
        if (tg.isClosingConfirmationEnabled) {
            tg.disableVerticalSwipes?.();
        }
    }

    function applyTheme() {
        if (!tg) return;
        if (tg.colorScheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        } else {
            document.documentElement.removeAttribute('data-theme');
        }
    }

    if (tg) {
        applyTheme();
        tg.onEvent('themeChanged', applyTheme);
    }

    const likeBtn = document.getElementById('btn-like');
    const dislikeBtn = document.getElementById('btn-dislike');
    const infoBtn = document.getElementById('btn-info');

    function haptic(type = 'medium') {
        if (!tg?.HapticFeedback) return;
        tg.HapticFeedback.impactOccurred(type);
    }

    likeBtn.addEventListener('click', () => {
        haptic('heavy');
        likeBtn.classList.add('pulse');
        setTimeout(() => likeBtn.classList.remove('pulse'), 220);
    });

    dislikeBtn.addEventListener('click', () => {
        haptic('light');
    });

    infoBtn.addEventListener('click', () => {
        haptic('light');
    });

    const navToggle = document.getElementById('nav-toggle');
    navToggle.querySelectorAll('.segmented-item').forEach(item => {
        item.addEventListener('click', () => {
            navToggle.querySelectorAll('.segmented-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            haptic('light');
        });
    });

    const messagesBtn = document.getElementById('btn-messages');
    const badgeMessages = document.getElementById('badge-messages');
    const profileBtn = document.getElementById('btn-profile');

    messagesBtn.addEventListener('click', () => {
        haptic('light');
    });

    profileBtn.addEventListener('click', () => {
        haptic('light');
    });

    const demoProfiles = [
        {
            name: '–ê–ª–∏–Ω–∞',
            age: 21,
            city: '–ê–ª–º–∞—Ç—ã',
            bio: '–õ—é–±–ª—é –ø–æ–∑–¥–Ω–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏, –∫–æ—Ñ–µ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±–æ—è—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∫–æ–¥.',
            tags: ['üéß –ú—É–∑—ã–∫–∞', 'üéÆ –ò–≥—Ä—ã', '‚úàÔ∏è –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è'],
            photo: 'https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg'
        },
        {
            name: '–î–∞—à–∞',
            age: 19,
            city: '–ê—Å—Ç–∞–Ω–∞',
            bio: '–£—á—É—Å—å –Ω–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞, –º–æ–≥—É —á–∞—Å–∞–º–∏ –æ–±—Å—É–∂–¥–∞—Ç—å —à—Ä–∏—Ñ—Ç—ã –∏ —Ü–≤–µ—Ç–æ–≤—ã–µ –ø–∞–ª–∏—Ç—Ä—ã.',
            tags: ['üé® –î–∏–∑–∞–π–Ω', 'üì∑ –§–æ—Ç–æ', '‚òï –ö–æ—Ñ–µ'],
            photo: 'https://images.pexels.com/photos/733872/pexels-photo-733872.jpeg'
        },
        {
            name: '–°–æ–Ω—è',
            age: 22,
            city: '–ú–æ—Å–∫–≤–∞',
            bio: '–ò–Ω—Ç—Ä–æ–≤–µ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –ª—é–±–∏—Ç –ª—é–¥–µ–π. –ï—Å–ª–∏ –∏–≥—Ä–∞–µ—à—å –≤ Clash Royale ‚Äî —É–∂–µ +10 –∫ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.',
            tags: ['üéÆ Clash Royale', 'üìö –ö–Ω–∏–≥–∏', 'üéß Lo-fi'],
            photo: 'https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg'
        }
    ];

    let currentIndex = 0;

    const feedPhoto = document.getElementById('feed-photo');
    const feedName = document.getElementById('feed-name');
    const feedAge = document.getElementById('feed-age');
    const feedCity = document.getElementById('feed-city');
    const feedBio = document.getElementById('feed-bio');
    const feedTags = document.getElementById('feed-tags');

    function renderProfile(index) {
        const p = demoProfiles[index % demoProfiles.length];
        feedPhoto.src = p.photo;
        feedName.textContent = p.name;
        feedAge.textContent = p.age;
        feedCity.querySelector('span:last-child').textContent = p.city;
        feedBio.textContent = p.bio;
        feedTags.innerHTML = '';
        p.tags.forEach((t, i) => {
            const div = document.createElement('div');
            div.className = 'chip' + (i === 0 ? ' chip-accent' : '');
            div.textContent = t;
            feedTags.appendChild(div);
        });
    }

    renderProfile(0);

    function nextProfile() {
        currentIndex++;
        renderProfile(currentIndex);
    }

    likeBtn.addEventListener('click', nextProfile);
    dislikeBtn.addEventListener('click', nextProfile);

    const feed = document.getElementById('feed-card');
    let startX = 0;
    let currentX = 0;
    let isDragging = false;

    const swipeThreshold = 60;

    function handleStart(x) {
        isDragging = true;
        startX = x;
        currentX = x;
        feed.style.transition = 'none';
    }

    function handleMove(x) {
        if (!isDragging) return;
        currentX = x;
        const delta = currentX - startX;
        const rotation = delta * 0.03;
        const opacity = 1 - Math.min(Math.abs(delta) / 260, 0.6);
        feed.style.transform = `translateX(${delta}px) rotate(${rotation}deg)`;
        feed.style.opacity = opacity;
    }

    function handleEnd() {
        if (!isDragging) return;
        isDragging = false;
        const delta = currentX - startX;
        if (Math.abs(delta) > swipeThreshold) {
            if (delta > 0) {
                haptic('light');
            } else {
                haptic('light');
            }
            const direction = delta > 0 ? 1 : -1;
            feed.style.transition = 'transform 0.22s ease-out, opacity 0.22s ease-out';
            feed.style.transform = `translateX(${direction * 420}px) rotate(${direction * 14}deg)`;
            feed.style.opacity = 0;
            setTimeout(() => {
                feed.style.transition = 'none';
                feed.style.transform = 'translateX(0) rotate(0)';
                feed.style.opacity = 1;
                nextProfile();
            }, 220);
        } else {
            feed.style.transition = 'transform 0.2s ease-out, opacity 0.2s ease-out';
            feed.style.transform = 'translateX(0) rotate(0)';
            feed.style.opacity = 1;
        }
    }

    feed.addEventListener('touchstart', (e) => handleStart(e.touches[0].clientX));
    feed.addEventListener('touchmove', (e) => handleMove(e.touches[0].clientX));
    feed.addEventListener('touchend', handleEnd);

    feed.addEventListener('mousedown', (e) => handleStart(e.clientX));
    window.addEventListener('mousemove', (e) => handleMove(e.clientX));
    window.addEventListener('mouseup', handleEnd);
</script>
</body>
</html>
